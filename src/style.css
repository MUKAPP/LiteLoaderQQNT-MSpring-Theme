/* 删除背景 */
.recent-contact,
.viewport-list__inner,
.contact,
.tab-header,
.radio-tab,
/* .normal-file, */
.sys-notify,
/* .msg-content-container, */
/* .sys-notify-card, */
.file-list-normal-scroll-container,
.sender-container,
html:not(.mspring_background_plugin_enabled) .tab-container .profile,
/* 文件管理页面 文件列表下面的白条 */
.file-area .loadmore-placeholder,
/* 文件管理页面 群文件 群列表 */
.group-file-container,
.q-collapse-item,
.q-collapse-item .q-collapse-item__header,
/* 文件管理页面 类型列表 */
.file-type-container,
/* 文件管理页面 类型 图片与视频 */
.file-list-grid-scroll-container,
/* 文件管理页面 群文件 footer */
.file-area-container-group-file-footer,
/* 收藏 左侧列表 */
.favorites-layout,
.favorites-layout__left-area,
.favorites-layout__right-area,
.favorites-layout__content,
.favorites-header,
html,
body,
.app,
/* 查看图片顶栏 */
.main-area__header {
    background: initial !important;
}

/* 列表条目圆角 */
.viewport-list__inner {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 8px;
}

/* 好友通知、群通知列表项 */
.sys-notify__container .sys-notify-card,
.sys-notify__container .list-item {
    border-radius: 8px;
}

/* 消息列表项圆角 */
.viewport-list .list-item {
    border-radius: 12px;
}

/* 聊天框 */
html:not(.mspring_background_plugin_enabled) .chat-input-area {
    border-radius: 16px 16px 0px 0px;
}

/* 文件管理 文件列表 块 */
.file-list-normal-sort,
/* 文件管理 类型 图片与视频 */
.file-list-grid-scroll-container>* {
    margin-bottom: 16px;
}

/* 添加模糊 */
.normal-file,
.radio-tab {
    backdrop-filter: blur(8px);
}

/* 文件管理 发送人列表 */
.file-manager-main .q-collapse-item {
    background: none !important;
}

/* 
    文件管理 发送人列表
    文件管理 类型列表
    文件管理 发送人列表 展开的子列表 */
.file-manager-main .q-collapse-item__title,
.file-manager-main .file-type,
.file-manager-main .user-item-container {
    border-radius: 8px !important;
}

/* 登录页面QQ图标 */
.qq-icon-font {
    transform: none !important;
}

/* 查看图片界面工具栏 */
.main-area__header {
    backdrop-filter: none !important;
}

/* 查看图片界面 */
/* .main-area {
    background: #0000007f !important;
} */

/* 对话框背景 */
.q-dialog-modal {
    background: #0000003f !important;
}

/* 对话框 */
.q-dialog-main {
    box-shadow: 0 4px 32px 0px #00000021 !important;
    border-radius: 12px;
}

/* 浅色模式 */
@media (prefers-color-scheme: light) {

    /* 多选消息的按钮 */
    .forward-ops .op-icon {
        background: #00000010 !important;
    }

    /* 聊天界面更多面板 */
    .side-panel {
        box-shadow: 0 4px 6px 0px #00000010 !important;
        background: #ffffff !important;
        backdrop-filter: blur(32px) saturate(150%) opacity(40%);
        mix-blend-mode: multiply;
    }

    /* 
        聊天界面回顶按钮
        聊天界面回底按钮 */
    .chat-msg-area__tip--top-btn,
    .chat-msg-area__tip--bottom {
        background: #ffffff7f !important;
        backdrop-filter: blur(32px);
    }

    /* 
        (Windows) 主界面侧栏
        (Linux/Mac) 主界面侧栏
        主界面侧栏右边区域
        文件管理页面侧栏
        文件管理页面侧栏右边区域
        设置侧栏
        设置侧栏右边的区域 */
    html.windows .sidebar-nav,
    html:is(.linux, .mac) .sidebar,
    html:not(.mspring_lite_tool_background_enabled) .tab-container,
    .nav-bar-container,
    .file-manager-main,
    .setting-tab,
    .setting-main {
        background: var(--background-color-light) !important;
    }

    .viewport-list .list-item:hover {
        background-color: #00000021 !important;
    }

    /* 别人消息的背景 */
    html:not(.mspring_background_plugin_enabled) .ml-list .message-content__wrapper .container--others {
        background-color: #00000010 !important;
    }

    .message-content__wrapper .container--others span::selection,
    .message-content__wrapper .container--others heti-spacing::selection {
        background: var(--text-selected-color);
    }

    /* 自己消息的背景 */
    .message-content__wrapper .container--self {
        background: var(--theme-color) !important;
    }

    /* 好友通知、群通知列表项 */
    .sys-notify__container .sys-notify-card {
        background: #00000010 !important;
    }

    .search-result {
        border-radius: 12px !important;
        background: #ffffff !important;
        backdrop-filter: blur(32px) saturate(150%) opacity(40%);
        mix-blend-mode: multiply;
    }

    .q-popover,
    .user-card-main,
    .account-list {
        border-radius: 8px !important;
        backdrop-filter: blur(16px) saturate(150%) opacity(40%) !important;
        background: #ffffff !important;
        mix-blend-mode: multiply !important;
    }

    /* 表情面板 */
    .sticker-panel {
        /* 不知道为什么表情面板一使用 mix-blend-mode: multiply，backdrop-filter就会失效 */
        background: #ffffffef !important;
    }

    /* 
        文件管理 文件列表 块
        文件管理 文件列表 标题
        文件管理 类型 图片与视频
        (Windows) 设置 列表项卡片
        (Linux/Mac) 设置 列表项卡片
        设置 消息通知 列表项卡片 消息组
        (Windows) 设置 存储管理 列表项卡片
        设置 快捷键 列表项卡片
        LiteLoaderQQNT 主体&插件配置界面
        LiteLoaderQQNT 主体&插件配置界面
        QQNTim 设置界面*/
    .file-list-normal-sort,
    .file-list-normal-sort-title,
    .file-list-grid-scroll-container>*,
    html.windows .setting-main__content:not(.liteloader, .qqntim-settings-panel)>*>*:not(.appearance-tab)>*:not(.setting-item-title, .popup, .storage-space, .shotcut),
    html:is(.linux, .mac) .setting-main__content:not(.liteloader, .qqntim-settings-panel)>*>*:not(.setting-item-title, .popup, .shotcut),
    .setting-main__content .popup>*:not(.setting-item-title),
    html.windows .setting-main__content .storage-space>*:not(.setting-item-title, .storage-chart),
    .setting-main__content .shotcut>*,
    .liteloader .wrap,
    .liteloader .setting-item-content,
    .qqntim-settings-panel-section-content {
        background: #00000010 !important;
        border-radius: 8px;
    }

    .login-container {
        background-color: #ffffff !important;
    }

    .password-container__input-area .q-input,
    .password-container__input-area .password .input,
    .password-container__input-area .password .input.focus {
        border-radius: 8px !important;
        background: #00000010 !important;
    }

    /* 去除VIP红色昵称 */
    .vip-name {
        color: initial !important;
    }

    /* 防撤回提示 */
    html:not(.mspring_background_plugin_enabled, .mspring_lite_tool_background_enabled) .message-content-recalled {
        background: #00000010 !important;
        backdrop-filter: initial !important;
    }

}


/* 深色模式 */
@media (prefers-color-scheme: dark) {

    /* 多选消息的按钮 */
    .forward-ops .op-icon {
        background: #ffffff21 !important;
    }

    /* 聊天界面更多面板 */
    .side-panel {
        box-shadow: 0 4px 6px 0px #00000010 !important;
        background: #171717 !important;
        backdrop-filter: blur(32px) saturate(150%) opacity(40%);
        mix-blend-mode: multiply;
    }

    /* 
        聊天界面回顶按钮
        聊天界面回底按钮 */
    .chat-msg-area__tip--top-btn,
    .chat-msg-area__tip--bottom {
        background: #1717177f !important;
        backdrop-filter: blur(32px);
    }

    /* 
        (Windows) 主界面侧栏
        (Linux/Mac) 主界面侧栏
        主界面侧栏右边区域
        文件管理页面侧栏
        文件管理页面侧栏右边区域
        设置侧栏
        设置侧栏右边的区域 */
    html.windows .sidebar-nav,
    html:is(.linux, .mac) .sidebar,
    html:not(.mspring_lite_tool_background_enabled) .tab-container,
    .nav-bar-container,
    .file-manager-main,
    .setting-tab,
    .setting-main {
        background: var(--background-color-dark) !important;
    }

    .viewport-list .list-item:hover {
        background-color: #ffffff3f !important;
    }

    /* 别人消息的背景 */
    html:not(.mspring_background_plugin_enabled) .ml-list .message-content__wrapper .container--others {
        background: #ffffff21 !important;
    }

    /* 自己消息的背景 */
    .message-content__wrapper .container--self {
        background: var(--theme-color) !important;
    }

    /* 好友通知、群通知列表项 */
    .sys-notify__container .sys-notify-card {
        background: #ffffff21 !important;
    }

    .search-result {
        border-radius: 12px !important;
        background: #171717 !important;
        backdrop-filter: blur(32px) saturate(150%) opacity(40%);
        mix-blend-mode: multiply;
    }

    .q-popover,
    .user-card-main,
    .account-list {
        border-radius: 8px !important;
        backdrop-filter: blur(16px) saturate(150%) opacity(40%) !important;
        background: #171717 !important;
        mix-blend-mode: multiply !important;
    }

    /* 表情面板 */
    .sticker-panel {
        /* 不知道为什么表情面板一使用 mix-blend-mode: multiply，backdrop-filter就会失效 */
        background: #171717ef !important;
    }

    /* 
        文件管理 文件列表 块
        文件管理 文件列表 标题
        文件管理 类型 图片与视频
        (Windows) 设置 列表项卡片
        (Linux/Mac) 设置 列表项卡片 
        设置 消息通知 列表项卡片 消息组
        (Windows) 设置 存储管理 列表项卡片
        设置 快捷键 列表项卡片
        LiteLoaderQQNT 主体&插件配置界面
        LiteLoaderQQNT 主体&插件配置界面
        QQNTim 设置界面*/
    .file-list-normal-sort,
    .file-list-normal-sort-title,
    .file-list-grid-scroll-container>*,
    html.windows .setting-main__content:not(.liteloader, .qqntim-settings-panel)>*>*:not(.appearance-tab)>*:not(.setting-item-title, .popup, .storage-space, .shotcut),
    html:is(.linux, .mac) .setting-main__content:not(.liteloader, .qqntim-settings-panel)>*>*:not(.setting-item-title, .popup, .shotcut),
    .setting-main__content .popup>*:not(.setting-item-title),
    html.windows .setting-main__content .storage-space>*:not(.setting-item-title, .storage-chart),
    .setting-main__content .shotcut>*,
    .liteloader .wrap,
    .liteloader .setting-item-content,
    .qqntim-settings-panel-section-content {
        background: #ffffff21 !important;
        border-radius: 8px;
    }

    /* 登录页面背景 */
    .login-container {
        background-color: #171717 !important;
    }

    .password-container__input-area .q-input,
    .password-container__input-area .password .input,
    .password-container__input-area .password .input.focus {
        border-radius: 8px !important;
        background: #ffffff3f !important;
    }

    .login-panel,
    .proxy-setting__title,
    .proxy-setting__subtitle,
    #qPullDownMenuTrigger,
    .login-panel .q-button.q-button--secondary.q-button--default>span {
        color: #ffffff !important;
    }

    .login-panel .q-button.q-button--secondary.q-button--default {
        border-color: #ffffff7f !important;
    }

    .q-pulldown-menu-button {
        background: #ffffff21 !important;
    }

    .login-panel .proxy-setting__type>div>div>span>i>svg>path {
        fill: #ffffff !important;
    }

    .process-text,
    .password-container__input-area,
    .password-container__input-area .q-icon,
    .password-container__input-area .q-input__inner,
    .account-list .uin {
        color: #ffffff !important;
    }

    /* 登录页面手机验证文本颜色 */
    .wait-confirm .title,
    .wait-confirm .desc,
    html.windows .auto-login .status-txt,
    html:is(.linux, .mac) .status .notice>span {
        color: #ffffff !important;
    }

    .login-panel .seperator {
        color: #ffffff7f !important;
    }

    .login-panel .password-container__opreate.operation>div,
    .login-panel .operation>div {
        background: #ffffff7f !important;
    }

    /* 登录页隐私checkbox未勾选 */
    .q-checkbox:not(.is-disabled):not(.is-checked):hover .q-checkbox__input {
        background-color: #ffffff3f !important;
        border-color: #ffffff9f !important;
    }

    /* 登录页隐私checkbox勾选 */
    .q-checkbox .q-checkbox__input {
        background-color: #ffffff10 !important;
        border-color: #ffffff3f !important;
    }

    .main-search .search-input,
    /* Linux/Mac端最近聊天加号按钮 */
    html:is(.linux, .mac) .contact-adder-btn {
        background: #ffffff10 !important;
    }

    /* 自己发送的链接颜色 */
    .container--self .text-link {
        color: #ffffff !important;
    }

    /* 登录页面QQ图标颜色 */
    .qq-icon-font>*>*>* {
        fill: #ffffff !important;
    }

    #app>div>div.window-control-area>div>i>svg>path,
    #app>div>div.setting>i>svg>path {
        fill: #ffffff !important;
    }

    /* 去除VIP红色昵称 */
    .vip-name {
        color: #ffffff !important;
    }

    /* 防撤回提示 */
    html:not(.mspring_background_plugin_enabled, .mspring_lite_tool_background_enabled) .message-content-recalled {
        background: #ffffff21 !important;
        backdrop-filter: initial !important;
    }
}

:root {
    --el-color-primary: var(--theme-color);
}

.q-theme-tokens-light {
    --brand_standard: var(--theme-color);
    --nt_brand_standard_2_overlay_pressed_brand_2_mix: var(--theme-color-dark2);
    --nt_brand_standard_2_overlay_hover_brand_2_mix: var(--theme-color-dark1);
    --bubble_host: var(--theme-color);
    --nt_brand_standard_2_20_2_alpha: #cb82be3f;
    --overlay_active_brand: var(--theme-color);
    --text_link: var(--theme-color);
    --text-brand: var(--theme-color);
}

.q-theme-tokens-dark {
    --brand_standard: var(--theme-color);
    --nt_brand_standard_2_overlay_pressed_brand_2_mix: var(--theme-color-dark2);
    --nt_brand_standard_2_overlay_hover_brand_2_mix: var(--theme-color-dark1);
    --bubble_host: var(--theme-color);
    --overlay_active_brand: var(--theme-color);
    --text_link: var(--theme-color);
    --text-brand: var(--theme-color);
}

.send-btn-wrap,
.top-bar__adder,
.search-input,
.radio-tab,
.q-pulldown-menu-button,
.record-search,
.search,
.guilds-item-btn .q-button {
    border-radius: 8px !important;
}

.q-context-menu:not(.is-pure),
.q-context-sub-menu__container:not(.is-pure),
.q-button {
    /* backdrop-filter: brightness(100%) saturate(120%) blur(8px); */
    /* background: none !important; */
    border-radius: 8px;
}

.guilds-item {
    border-radius: 16px !important;
    height: initial !important;
    min-width: auto !important;
}

.password-container__input-area .q-input__inner,
.password-container__input-area .password {
    background: none !important;
}

.login-container {
    background-image: none !important;
}

.auto-login .avatar {
    box-shadow: 0px 4px 28px 0px var(--text-selected-color) !important;
}

.record-msg .msg-content-container {
    background: none !important;
    backdrop-filter: none !important;
}

/* 搜索框等点击之后粉线的圆角 */
.q-input__inner:focus {
    border-radius: 8px !important;
}

/* 登录页面链接颜色 */
.login-panel .password-container__opreate.operation>span:nth-child(1)>span,
.login-panel .password-container__opreate.operation>span:nth-child(3)>span,
#chk1-label>a:nth-child(1),
#chk1-label>a:nth-child(2),
#app>div>div.login-panel>div>div.operation>span:nth-child(1),
#app>div>div.login-panel>div>div.operation>span:nth-child(3),
.login-panel .operation {
    color: var(--text_link) !important;
}

/* 
    删除Linux/Mac版最近聊天的加载占位背景
    删除Linux/Mac版群成员列表的加载占位背景 */
html:is(.linux, .mac) .recent-contact .viewport-list,
html:is(.linux, .mac) .group-member .viewport-list {
    background-image: none !important;
}

/* 删除Linux/Mac版好友通知/群通知的多余边距 */
html:is(.linux, .mac) .sys-notify .sys-notify-card {
    padding: unset !important;
}

/* 
    删除Linux/Mac版搜索结果多余的第二层背景 */
html:is(.linux, .mac) .search-result-background {
    background-color: initial !important
}

/* 插件市场展开按钮 */
.plugins_marketplace .adv-ops-btn {
    border-radius: 8px !important;
}

/* 插件市场作者链接文字颜色 */
.plugins_marketplace .plugin-list .extra-information a {
    color: var(--theme-color) !important;
}

.plugins_marketplace .plugin-list .extra-information a:hover {
    color: var(--theme-color-dark2) !important;
}

/* 颜色选择器 */
.liteloader input[type="color"] {
    padding: 4px;
}

.liteloader ::-webkit-color-swatch-wrapper {
    padding: 0px;
}

.liteloader ::-webkit-color-swatch {
    border-radius: 4px;
    border: #00000000 solid 1px;
}

.liteloader input:focus {
    border: 1px solid !important;
}

/* 
    管理员标签（群成员列表）
    管理员标签（聊天界面）
    群公告置顶标签
 */
.group-user .q-tag.group-user__role:not(.primary),
.group-chat .q-tag.member-role-tag:not(.primary),
.notice__container .top-flag {
    color: var(--theme-color) !important;
    background: var(--theme-tag-color) !important;
}

/* 优化 QQNTim 设置界面样式 */
.qqntim-settings-panel-section-header-title {
    color: var(--text_primary) !important;
    font-weight: var(--font-bold) !important;
    font-size: min(var(--font_size_3), 18px) !important;
    line-height: min(var(--line_height_3), 24px) !important;
    margin-bottom: 8px !important;
    padding: 0px 16px !important;
}

.qqntim-settings-panel-section-header {
    padding: initial !important;
}

.qqntim-settings-panel-section {
    margin: 0px 4px 0px !important;
}

.qqntim-settings-panel-section-content {
    border-top-left-radius: 8px !important;
    border-top-right-radius: 8px !important;
    border-bottom-right-radius: 8px !important;
    border-bottom-left-radius: 8px !important;
    font-size: min(var(--font_size_3), 18px) !important;
    line-height: min(var(--line_height_3), 24px) !important;
    margin-bottom: 20px !important;
    overflow-x: hidden !important;
    overflow-y: hidden !important;
    padding: 0px 16px !important;
}

/* 开启背景插件后自己发送消息的文本颜色 */
html.mspring_background_plugin_enabled .msg-content-container.container--self {
    color: var(--bubble_host_text) !important;
}

/* 开启背景插件后自己回复消息的文本颜色 */
html.mspring_background_plugin_enabled .reply-element.reply-element--self {
    color: var(--on_brand_primary) !important;
}

/* 开启背景插件后的搜索框多的双层方形背景 */
html.mspring_background_plugin_enabled .main-search {
    background: none !important;
}